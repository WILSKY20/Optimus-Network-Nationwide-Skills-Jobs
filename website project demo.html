<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Optimus Network — Nationwide Skills & Jobs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --brand-blue:#1d4ed8;
      --brand-bg:#f1f5f9;
      --brand-gold:#fbbf24;
    }
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--brand-bg);color:#0f172a;scroll-behavior:smooth}
    .card:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,.08);transition:.25s}
    .hidden-sec{display:none}
    .active-link{color:var(--brand-blue);font-weight:600}
    .chip{display:inline-block;padding:.35rem .6rem;border-radius:999px;border:1px solid #cbd5e1;background:#fff;font-size:.8rem}
    .chip:hover{background:#f8fafc;cursor:pointer}
  </style>
</head>
<body class="flex flex-col min-h-screen">

<header class="fixed top-0 left-0 right-0 bg-white/90 backdrop-blur border-b border-blue-200 z-50">
  <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-3">
    <a href="#/" class="flex items-center gap-2">
      <div class="w-9 h-9 rounded-2xl bg-blue-700 grid place-items-center text-white font-extrabold">ON</div>
      <strong class="text-xl text-blue-700">Optimus Network</strong>
    </a>
    <nav class="hidden md:flex gap-6 text-lg font-medium">
      <a href="#/" data-target="home" class="navlink hover:text-blue-600 active-link">Home</a>
      <a href="#/about" data-target="about" class="navlink hover:text-blue-600">About</a>
      <a href="#/join" data-target="join" class="navlink hover:text-blue-600">Join</a>
      <a href="#/states" data-target="states" class="navlink hover:text-blue-600">States</a>
      <a href="#/network" data-target="network" class="navlink hover:text-blue-600">Network</a>
      <a href="#/jobs" data-target="jobs" class="navlink hover:text-blue-600">Jobs</a>
      <a href="#/market" data-target="market" class="navlink hover:text-blue-600">Marketplace</a>
    </nav>
  </div>
</header>

<!-- HOME -->
<section id="home" class="flex-grow section pt-28 pb-20 bg-gradient-to-br from-blue-50 to-white">
  <div class="max-w-7xl mx-auto grid md:grid-cols-2 items-center gap-10 px-4">
    <div>
      <h1 class="text-5xl font-extrabold leading-tight">
        Hire local talent across <span class="text-blue-700">all 50 states</span>.
      </h1>
      <p class="mt-4 text-lg text-slate-700">
        Trades, tutors, coders, designers, movers — find skills near you, post jobs, or join the network.
      </p>
      <div class="mt-6 flex gap-3">
        <a href="#/join" data-target="join" class="navlink px-5 py-3 rounded-xl bg-blue-700 text-white font-semibold hover:bg-blue-800">Join Now</a>
        <a href="#/network" data-target="network" class="navlink px-5 py-3 rounded-xl border border-slate-300 font-semibold">Browse Network</a>
      </div>
    </div>
    <img src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d" class="rounded-2xl shadow-xl border border-slate-200" alt="People collaborating">
  </div>
</section>

<!-- ABOUT -->
<section id="about" class="flex-grow section hidden-sec pt-28 pb-16 bg-white">
  <div class="max-w-5xl mx-auto text-center px-4">
    <h2 class="text-3xl font-bold mb-4 text-blue-700">About Optimus Network</h2>
    <p class="text-slate-600 max-w-3xl mx-auto">
      We connect America’s doers — plumbers, electricians, movers, tutors, developers, designers and more — with real opportunities.
      Create a profile, choose your statement tag, and get discovered by people in your state.
    </p>
    <img src="https://images.unsplash.com/photo-1581090700227-1e37b190418e" alt="Working together" class="mt-8 rounded-2xl shadow-md mx-auto">
  </div>
</section>

<!-- JOIN -->
<section id="join" class="flex-grow section hidden-sec pt-28 pb-16 bg-blue-50">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <h2 class="text-4xl font-bold text-blue-700 mb-4">Join Optimus Network</h2>
    <p class="text-slate-600 mb-8">Create your profile (appears instantly in the Network directory).</p>

    <form id="joinForm" class="bg-white border border-blue-200 rounded-2xl shadow p-6 grid gap-4 text-left">
      <input id="name" placeholder="Full Name" required class="border rounded-lg px-3 py-2">
      <input id="role" placeholder="Headline (e.g., Certified Plumber, Math Tutor, Web Developer)" required class="border rounded-lg px-3 py-2">
      <div class="grid md:grid-cols-2 gap-4">
        <select id="skill" class="border rounded-lg px-3 py-2" required>
          <option value="">Select Skill</option>
          <option value="plumbing">Plumbing</option><option value="electrician">Electrical</option>
          <option value="construction">Construction</option><option value="coding">Coding</option>
          <option value="data">Data</option><option value="design">Design</option>
          <option value="sports">Sports</option><option value="writing">Writing</option>
          <option value="tutoring">Tutoring</option><option value="logistics">Logistics</option>
        </select>
        <select id="state" class="border rounded-lg px-3 py-2" required></select>
      </div>
      <select id="stmt" class="border rounded-lg px-3 py-2" required></select>
      <div class="grid md:grid-cols-2 gap-4">
        <input type="number" id="rate" placeholder="Hourly Rate ($)" required class="border rounded-lg px-3 py-2">
        <input id="img" type="url" placeholder="Profile Image URL (optional)" class="border rounded-lg px-3 py-2">
      </div>
      <textarea id="bio" placeholder="Your statement (what you offer, experience, values)" rows="4" class="border rounded-lg px-3 py-2" required></textarea>
      <button class="bg-blue-700 text-white font-semibold py-2 rounded-xl hover:bg-blue-800">Create Profile</button>
    </form>
  </div>
</section>

<!-- STATES -->
<section id="states" class="flex-grow section hidden-sec pt-28 pb-16 bg-white">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-2">Find People by State</h2>
    <p class="text-slate-600 text-center mb-6">Click a state to view members located there.</p>
    <div id="stateGrid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"></div>
  </div>
</section>

<!-- NETWORK -->
<section id="network" class="flex-grow section hidden-sec pt-28 pb-16 bg-blue-50">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <h2 class="text-3xl font-bold">Network Members</h2>
        <p class="text-slate-600">Search by name/role, filter by skill, state, <span class="font-semibold">statement tag</span>, and sort by rate/name.</p>
      </div>
      <form id="filters" class="bg-white border border-blue-200 rounded-2xl p-3 grid sm:grid-cols-2 md:grid-cols-7 gap-3">
        <input name="q" placeholder="Search name or role…" class="px-3 py-2 rounded-xl border border-slate-300">
        <select name="skill" class="px-3 py-2 rounded-xl border border-slate-300">
          <option value="">All skills</option>
          <option value="plumbing">Plumbing</option><option value="electrician">Electrical</option>
          <option value="construction">Construction</option><option value="coding">Coding</option>
          <option value="data">Data</option><option value="design">Design</option>
          <option value="sports">Sports</option><option value="writing">Writing</option>
          <option value="tutoring">Tutoring</option><option value="logistics">Logistics</option>
        </select>
        <select name="state" class="px-3 py-2 rounded-xl border border-slate-300"></select>
        <select name="stmt" class="px-3 py-2 rounded-xl border border-slate-300"></select>
        <input name="min" type="number" min="0" placeholder="Min $" class="px-3 py-2 rounded-xl border border-slate-300">
        <input name="max" type="number" min="0" placeholder="Max $" class="px-3 py-2 rounded-xl border border-slate-300">
        <select name="sort" class="px-3 py-2 rounded-xl border border-slate-300">
          <option value="">Sort</option>
          <option value="rateAsc">Rate ↑</option><option value="rateDesc">Rate ↓</option>
          <option value="nameAsc">Name A–Z</option><option value="nameDesc">Name Z–A</option>
        </select>
      </form>
    </div>
    <div id="stmtChips" class="mt-4 flex flex-wrap gap-2"></div>
    <div id="grid" class="mt-8 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </div>
</section>

<!-- PROFILE VIEW -->
<section id="profileView" class="flex-grow section hidden-sec pt-28 pb-16 bg-white">
  <div class="max-w-4xl mx-auto px-4">
    <a href="#/network" class="inline-flex items-center gap-2 text-blue-700 mb-6">&larr; Back to Network</a>
    <div id="profileContainer" class="bg-blue-50 border border-blue-200 rounded-2xl p-6 md:p-8"></div>
  </div>
</section>

<!-- JOBS -->
<section id="jobs" class="flex-grow section hidden-sec pt-28 pb-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-bold mb-6">Job Listings</h2>
    <div id="jobGrid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </div>
</section>

<!-- MARKETPLACE -->
<section id="market" class="flex-grow section hidden-sec pt-28 pb-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-bold mb-6">Marketplace</h2>
    <div id="marketGrid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </div>
</section>

<footer class="py-12 bg-blue-900 text-blue-100 text-center text-sm">
  <p>© 2025 Optimus Network — Nationwide skills & opportunity.</p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getFirestore, collection, getDocs, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyApvSx0EoW4D7e65xVCTod4cq10NZGcjto",
  authDomain: "optimus-network-8bfc0.firebaseapp.com",
  projectId: "optimus-network-8bfc0",
  storageBucket: "optimus-network-8bfc0.appspot.com",
  messagingSenderId: "551403058510",
  appId: "1:551403058510:web:5ed17df20990623ca51a1f",
  measurementId: "G-MPN7KHMYDX"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const US_STATES = [...Array(50).keys()].map(i=>["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"][i]);
const STATEMENTS = ["Reliable Service","Affordable Rates","Experienced Professional","Fast Response","Customer Focused","Certified Expert","Insured & Licensed","Same-Day Service","Remote-Friendly","Flexible Scheduling"];

function populateSelect(sel, arr, allOption){ sel.innerHTML = allOption?`<option value="">All</option>`:""; arr.forEach(a=>{ const o=document.createElement('option'); o.value=a;o.textContent=a;sel.appendChild(o); }); }

const joinForm = document.getElementById('joinForm');
const joinState = document.getElementById('state');
const joinStmt = document.getElementById('stmt');
populateSelect(joinState,US_STATES,false);
populateSelect(joinStmt,STATEMENTS,false);

async function addProfile(p){ await addDoc(collection(db,'profiles'),p); }

joinForm.addEventListener('submit', async e=>{
  e.preventDefault();
  const p = {
    name: document.getElementById('name').value.trim(),
    role: document.getElementById('role').value.trim(),
    skill: document.getElementById('skill').value,
    state: document.getElementById('state').value,
    stmt: document.getElementById('stmt').value,
    rate: Number(document.getElementById('rate').value),
    img: document.getElementById('img').value.trim() || `https://randomuser.me/api/portraits/${Math.random()>.5?'men':'women'}/${Math.floor(Math.random()*90)+1}.jpg`,
    bio: document.getElementById('bio').value.trim()
  };
  await addProfile(p);
  alert('Profile created! Check the Network page.');
  joinForm.reset();
  location.hash='#/network';
});

const stateGrid = document.getElementById('stateGrid');
US_STATES.forEach(s=>{ stateGrid.innerHTML+=`<button class="chip text-blue-800 border-blue-200" data-state="${s}">${s}</button>`; });
stateGrid.addEventListener('click',e=>{ const b=e.target.closest('[data-state]'); if(!b)return; filtersForm.state.value=b.dataset.state; location.hash='#/network'; applyFilters(); });

const stmtChips = document.getElementById('stmtChips');
STATEMENTS.forEach(s=>stmtChips.innerHTML+=`<button class="chip" data-stmt="${s}">${s}</button>`);
stmtChips.addEventListener('click',e=>{ const b=e.target.closest('[data-stmt]'); if(!b)return; filtersForm.stmt.value=b.dataset.stmt; applyFilters(); });

const filtersForm=document.getElementById('filters');
populateSelect(filtersForm.state,US_STATES,true);
populateSelect(filtersForm.stmt,STATEMENTS,true);
filtersForm.addEventListener('input',applyFilters);
const grid=document.getElementById('grid');

function profileCard(p){ return `
  <a href="#/profile/${p.id}" class="card block bg-white border border-blue-200 rounded-2xl p-4 text-center">
    <img src="${p.img}" class="w-24 h-24 rounded-full mx-auto mb-3 object-cover border-4 border-blue-100" alt="">
    <div class="font-bold text-lg text-blue-700">${p.name}</div>
    <div class="text-slate-600 text-sm">${p.role}</div>
    <div class="mt-1 text-xs"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">${p.skill.toUpperCase()}</span></div>
    <div class="mt-1 text-xs text-slate-500">${p.state}</div>
    <div class="mt-1 text-xs text-slate-600">${p.stmt}</div>
    <div class="text-blue-700 font-semibold mt-2">$${p.rate}/hr</div>
  </a>
`; }

function renderNetwork(list){ grid.innerHTML=list.map(profileCard).join('')||`<p class="text-slate-600">No results. Try clearing filters.</p>`; }

async function applyFilters(){
  const snap=await getDocs(collection(db,'profiles'));
  let all=snap.docs.map(d=>({id:d.id,...d.data()}));
  const q=(filtersForm.q.value||'').toLowerCase(),sk=filtersForm.skill.value,st=filtersForm.state.value,sm=filtersForm.stmt.value,min=Number(filtersForm.min.value||0),max=Number(filtersForm.max.value||Infinity),sort=filtersForm.sort.value;
  let out=all.filter(p=> (!q||[p.name,p.role,p.bio].join(' ').toLowerCase().includes(q)) && (!sk||p.skill===sk) && (!st||p.state===st) && (!sm||p.stmt===sm) && (p.rate>=min&&p.rate<=max));
  out=out.sort((a,b)=>{ if(sort==='rateAsc') return a.rate-b.rate; if(sort==='rateDesc') return b.rate-a.rate; if(sort==='nameAsc') return a.name.localeCompare(b.name); if(sort==='nameDesc') return b.name.localeCompare(a.name); return 0; });
  renderNetwork(out);
}

const profileContainer=document.getElementById('profileContainer');
async function renderProfile(id){
  const snap=await getDocs(collection(db,'profiles'));
  const p=snap.docs.map(d=>({id:d.id,...d.data()})).find(x=>x.id===id);
  if(!p){ profileContainer.innerHTML=`<p class="text-slate-600">Profile not found.</p>`; return; }
  profileContainer.innerHTML=`
    <div class="grid md:grid-cols-3 gap-6">
      <div class="md:col-span-1 text-center">
        <img src="${p.img}" class="w-40 h-40 rounded-2xl mx-auto object-cover border-4 border-blue-100" alt="">
        <div class="mt-4 text-sm text-slate-600">${p.state}</div>
      </div>
      <div class="md:col-span-2">
        <h1 class="text-3xl font-extrabold text-blue-700">${p.name}</h1>
        <p class="text-slate-700">${p.role}</p>
        <div class="mt-2 flex flex-wrap gap-2">
          <span class="chip bg-blue-50 border-blue-200">${p.skill.toUpperCase()}</span>
          <span class="chip bg-yellow-50 border-yellow-200">${p.stmt}</span>
        </div>
        <div class="mt-3 font-semibold text-blue-800">$${p.rate}/hour</div>
        <h3 class="mt-6 font-bold">Professional Statement</h3>
        <p class="mt-2 text-slate-700 leading-relaxed">${p.bio}</p>
        <button class="mt-6 px-4 py-2 rounded-xl bg-blue-700 text-white font-semibold hover:bg-blue-800" onclick="alert('Demo: contact form coming soon')">Contact ${p.name.split(' ')[0]}</button>
      </div>
    </div>
  `;
}

/* ROUTING */
const sections=Array.from(document.querySelectorAll('.section'));
function show(id){ sections.forEach(s=>s.id===id?s.classList.remove('hidden-sec'):s.classList.add('hidden-sec')); document.querySelectorAll('.navlink').forEach(a=>a.classList.toggle('active-link', a.dataset.target===id)); window.scrollTo({top:0,behavior:'smooth'}); }
function handleRoute(){
  const hash=location.hash||"#/",parts=hash.replace(/^#\//,'').split('/');
  if(parts[0]==='profile'&&parts[1]){ renderProfile(parts[1]); show('profileView'); return; }
  switch(parts[0]){
    case '': show('home'); break;
    case 'about': show('about'); break;
    case 'join': show('join'); break;
    case 'states': show('states'); break;
    case 'network': show('network'); break;
    case 'jobs': show('jobs'); break;
    case 'market': show('market'); break;
    default: show('home');
  }
}
window.addEventListener('hashchange', handleRoute);
window.addEventListener('load',()=>{ applyFilters(); handleRoute(); });
</script>
</body>
</html>
